
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://dglaird.github.io/afccp/reference/solutions/algorithms/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../handling/">
      
      
      <link rel="icon" href="../../../images/logos/afccp_logo_favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Algorithms - Air Force Cadet Career Problem</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#solutions.algorithms" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Air Force Cadet Career Problem" class="md-header__button md-logo" aria-label="Air Force Cadet Career Problem" data-md-component="logo">
      
  <img src="../../../images/logos/afccp_logo_and_text_light.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Air Force Cadet Career Problem
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Algorithms
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/dglaird/afccp/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  üè† Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../getting-started/getting-started/" class="md-tabs__link">
          
  
  
  üöÄ Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../user-guide/overview/" class="md-tabs__link">
          
  
  
  üìò User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../developer-guide/" class="md-tabs__link">
        
  
  
    
  
  üß† Developer Guide

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../main/cadetcareerproblem_overview/" class="md-tabs__link">
          
  
  
  CadetCareerProblem

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../data/" class="md-tabs__link">
          
  
  
  üìä Data

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  üìà Solutions

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../visualizations/" class="md-tabs__link">
          
  
  
  Visualizations

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../faq/" class="md-tabs__link">
        
  
  
    
  
  ‚ùì FAQs

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../help/" class="md-tabs__link">
        
  
  
    
  
  üÜò Help & Support

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Air Force Cadet Career Problem" class="md-nav__button md-logo" aria-label="Air Force Cadet Career Problem" data-md-component="logo">
      
  <img src="../../../images/logos/afccp_logo_and_text_light.png" alt="logo">

    </a>
    Air Force Cadet Career Problem
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dglaird/afccp/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üè† Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    üöÄ Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            üöÄ Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting-started/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üìÑ Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    üõ†Ô∏è Install Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            üõ†Ô∏è Install Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation Instructions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting-started/developer-checklist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer Checklist
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    üìò User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            üìò User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/tutorial_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial 1 (Introduction)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/tutorial_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial 2 (Data Overview)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/tutorial_3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial 3 (Parameters)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/tutorial_4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial 4 (Value Parameters)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/tutorial_5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial 5 (Data Methods)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/tutorial_6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial 6 (Solutions Overview)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/tutorial_7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial 7 (Algorithms)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/tutorial_8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial 8 (Optimization)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/tutorial_9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial 9 (Visualizations)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üß† Developer Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    CadetCareerProblem
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            CadetCareerProblem
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/cadetcareerproblem_overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/cadetcareerproblem_generated_data_corrections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generated Data Corrections
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/cadetcareerproblem_main_data_corrections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Main Data Corrections
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/cadetcareerproblem_other_adjustments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Other Adjustments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/cadetcareerproblem_value_parameter_specifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Value Parameter Specifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/cadetcareerproblem_solution_generation_%26_algorithms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Solution Generation & Algorithms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/cadetcareerproblem_optimization_models_%26_meta-heuristics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Optimization Models & Meta-Heuristics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/cadetcareerproblem_solution_handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Solution Handling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/cadetcareerproblem_export_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Export Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/cadetcareerproblem_data_visualizations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Visualizations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/cadetcareerproblem_results_visualizations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Results Visualizations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    üìä Data
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            üìä Data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/adjustments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adjustments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/preferences/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Preferences
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/processing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Processing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/values/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Values
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/generation/basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generation- 'Basic'
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/generation/realistic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generation- 'Realistic'
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üìà Solutions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            üìà Solutions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Algorithms
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Algorithms
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#solutions.algorithms.classic_hr" class="md-nav__link">
    <span class="md-ellipsis">
      classic_hr
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solutions.algorithms.rotc_rated_board_original" class="md-nav__link">
    <span class="md-ellipsis">
      rotc_rated_board_original
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solutions.algorithms.soc_rated_matching_algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      soc_rated_matching_algorithm
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solutions.algorithms.vft_genetic_algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      vft_genetic_algorithm
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solutions.algorithms.genetic_matching_algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      genetic_matching_algorithm
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Handling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../optimization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Optimization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sensitivity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sensitivity
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Visualizations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Visualizations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../visualizations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../visualizations/bubbles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bubbles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../visualizations/charts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Charts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../visualizations/slides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Slides
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ‚ùì FAQs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../help/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üÜò Help & Support
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<div class="doc doc-object doc-module">



<h1 id="solutions.algorithms" class="doc doc-heading">
            <code>solutions.algorithms</code>


<a href="#solutions.algorithms" class="headerlink" title="Permanent link">&para;</a></h1>

    <div class="doc doc-contents first">



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="solutions.algorithms.classic_hr" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">classic_hr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">capacities</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">printing</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#solutions.algorithms.classic_hr" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Matches cadets and AFSCs across all rated, space, and NRL positions using the Hospitals/Residents algorithm.</p>
<p>Parameters:
    instance (CadetCareerProblem): The instance of the CadetCareerProblem class.
    capacities (numpy.ndarray or None): The capacities of AFSCs. If None, the capacities are taken from the
        instance parameters. Default is None.
    printing (bool): Whether to print status updates or not. Default is True.</p>
<p>Returns:
    dict: The solution dictionary containing the assigned AFSCs for each cadet.</p>
<p>This function implements the Hospitals/Residents algorithm to match cadets and AFSCs across all rated, space,
and NRL positions. It takes an instance of the CadetCareerProblem class as input and an optional parameter
<code>capacities</code> to specify the capacities of AFSCs. If <code>capacities</code> is None, the capacities are taken from the
instance parameters. By default, the function prints status updates during the matching process.</p>
<p>The algorithm initializes the necessary variables and dictionaries. It then proceeds with the Hospitals/Residents
algorithm by having cadets propose to their top choices and AFSCs accept or reject cadets based on their preferences
and capacities. The matching process continues until all cadets are matched or have exhausted their preferences.
The function updates the matches and rejections for each AFSC and tracks the progress through iterations.</p>
<p>The function returns a solution dictionary containing the assigned AFSCs for each cadet.</p>
<p>Example usage:
    solution = classic_hr(instance, capacities=capacities, printing=True)</p>

            <details class="quote">
              <summary>Source code in <code>afccp/solutions/algorithms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">classic_hr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">capacities</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">printing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Matches cadets and AFSCs across all rated, space, and NRL positions using the Hospitals/Residents algorithm.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        instance (CadetCareerProblem): The instance of the CadetCareerProblem class.</span>
<span class="sd">        capacities (numpy.ndarray or None): The capacities of AFSCs. If None, the capacities are taken from the</span>
<span class="sd">            instance parameters. Default is None.</span>
<span class="sd">        printing (bool): Whether to print status updates or not. Default is True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: The solution dictionary containing the assigned AFSCs for each cadet.</span>

<span class="sd">    This function implements the Hospitals/Residents algorithm to match cadets and AFSCs across all rated, space,</span>
<span class="sd">    and NRL positions. It takes an instance of the CadetCareerProblem class as input and an optional parameter</span>
<span class="sd">    `capacities` to specify the capacities of AFSCs. If `capacities` is None, the capacities are taken from the</span>
<span class="sd">    instance parameters. By default, the function prints status updates during the matching process.</span>

<span class="sd">    The algorithm initializes the necessary variables and dictionaries. It then proceeds with the Hospitals/Residents</span>
<span class="sd">    algorithm by having cadets propose to their top choices and AFSCs accept or reject cadets based on their preferences</span>
<span class="sd">    and capacities. The matching process continues until all cadets are matched or have exhausted their preferences.</span>
<span class="sd">    The function updates the matches and rejections for each AFSC and tracks the progress through iterations.</span>

<span class="sd">    The function returns a solution dictionary containing the assigned AFSCs for each cadet.</span>

<span class="sd">    Example usage:</span>
<span class="sd">        solution = classic_hr(instance, capacities=capacities, printing=True)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">printing</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Modeling this as an H/R problem and solving with DAA...&quot;</span><span class="p">)</span>

    <span class="c1"># Shorthand</span>
    <span class="n">p</span><span class="p">,</span> <span class="n">vp</span><span class="p">,</span> <span class="n">mdl_p</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="n">instance</span><span class="o">.</span><span class="n">value_parameters</span><span class="p">,</span> <span class="n">instance</span><span class="o">.</span><span class="n">mdl_p</span>

    <span class="c1"># Algorithm initialization</span>
    <span class="k">if</span> <span class="n">capacities</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">total_slots</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;capacity_parameter&#39;</span><span class="p">]]</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c1"># In case this is used in a genetic algorithm</span>
        <span class="n">total_slots</span> <span class="o">=</span> <span class="n">capacities</span>

    <span class="c1"># Array to keep track of what AFSC choice in their list the cadets are proposing to (python index at 0)</span>
    <span class="n">cadet_proposal_choice</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>  <span class="c1"># Everyone proposes to their first choice initially</span>

    <span class="c1"># Initialize solution dictionary</span>
    <span class="n">solution</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;HR&#39;</span><span class="p">}</span>

    <span class="c1"># Dictionary of parameters used for the &quot;BubbleChart&quot; object (animation)</span>
    <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;collect_solution_iterations&#39;</span><span class="p">]:</span>
        <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;HR&#39;</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;proposals&#39;</span><span class="p">,</span> <span class="s1">&#39;matches&#39;</span><span class="p">,</span> <span class="s1">&#39;names&#39;</span><span class="p">]:</span>
            <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Begin the simple Hospital/Residents Algorithm</span>
    <span class="n">total_rejections</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">])</span>  <span class="c1"># Number of rejections for each AFSC</span>
    <span class="n">total_matched</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">])</span>  <span class="c1"># Number of accepted cadets for each AFSC</span>
    <span class="n">exhausted_cadets</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Will contain the cadets that have exhausted (been rejected by) all of their preferences</span>
    <span class="n">iteration</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># First iteration of the algorithm</span>
    <span class="k">while</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">total_matched</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">exhausted_cadets</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">]:</span>  <span class="c1"># Stopping conditions</span>

        <span class="c1"># Cadets propose to their top choice that hasn&#39;t been rejected</span>
        <span class="n">exhausted_cadets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">cadet_proposal_choice</span> <span class="o">&gt;=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;num_cadet_choices&#39;</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">proposals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;cadet_preferences&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="n">cadet_proposal_choice</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exhausted_cadets</span>
                              <span class="k">else</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">]])</span>

        <span class="c1"># Solution Iteration components (Proposals) and print statement</span>
        <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;collect_solution_iterations&#39;</span><span class="p">]:</span>
            <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="s1">&#39;proposals&#39;</span><span class="p">][</span><span class="n">iteration</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">proposals</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;ma_printing&#39;</span><span class="p">]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Iteration&quot;</span><span class="p">,</span> <span class="n">iteration</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">counts</span> <span class="o">=</span> <span class="p">{</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;afscs&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]:</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">proposals</span> <span class="o">==</span> <span class="n">j</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;J&#39;</span><span class="p">]}</span>

        <span class="c1"># Initialize matches information for this iteration</span>
        <span class="n">total_matched</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">])</span>

        <span class="c1"># AFSCs accept their best cadets and reject the others</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;J&#39;</span><span class="p">]:</span>

            <span class="c1"># Loop through their preferred cadets from top to bottom</span>
            <span class="n">iteration_rejections</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;afsc_preferences&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]:</span>

                <span class="c1"># If the cadet is proposing to this AFSC, we have two options</span>
                <span class="k">if</span> <span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">j</span><span class="p">:</span>

                    <span class="c1"># We haven&#39;t hit capacity, so we accept this cadet</span>
                    <span class="k">if</span> <span class="n">total_matched</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">total_slots</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                        <span class="n">total_matched</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

                    <span class="c1"># We&#39;re at capacity, so we reject this cadet</span>
                    <span class="k">else</span><span class="p">:</span>

                        <span class="c1"># Essentially &quot;delete&quot; the preference from the cadet&#39;s list</span>
                        <span class="n">cadet_proposal_choice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span>  <span class="c1"># index of the unmatched AFSC (*)</span>

                        <span class="c1"># Collect additional information</span>
                        <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;ma_printing&#39;</span><span class="p">]:</span>
                            <span class="n">iteration_rejections</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="n">total_rejections</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Solution Iteration components</span>
        <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;collect_solution_iterations&#39;</span><span class="p">]:</span>
            <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="s1">&#39;matches&#39;</span><span class="p">][</span><span class="n">iteration</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">proposals</span><span class="p">)</span>
            <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="s1">&#39;names&#39;</span><span class="p">][</span><span class="n">iteration</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Round &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">iteration</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Specific matching algorithm print statement</span>
        <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;ma_printing&#39;</span><span class="p">]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Proposals:&#39;</span><span class="p">,</span> <span class="n">counts</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Matched&#39;</span><span class="p">,</span> <span class="p">{</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;afscs&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]:</span> <span class="n">total_matched</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;J&#39;</span><span class="p">]})</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Rejected&#39;</span><span class="p">,</span> <span class="p">{</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;afscs&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]:</span> <span class="n">total_rejections</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;J&#39;</span><span class="p">]})</span>

        <span class="n">iteration</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># Next iteration!</span>

    <span class="c1"># Last solution iteration</span>
    <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;collect_solution_iterations&#39;</span><span class="p">]:</span>
        <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="s1">&#39;last_s&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">iteration</span> <span class="o">-</span> <span class="mi">1</span>

    <span class="c1"># Return solution</span>
    <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;j_array&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">proposals</span>
    <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;afsc_array&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;afscs&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;j_array&#39;</span><span class="p">]])</span>
    <span class="k">return</span> <span class="n">solution</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="solutions.algorithms.rotc_rated_board_original" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rotc_rated_board_original</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">printing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#solutions.algorithms.rotc_rated_board_original" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Assigns Rated AFSCs to ROTC cadets based on their preferences and the existing quotas for each AFSC using the
current rated board algorithm.</p>
<p>Parameters:
    instance (CadetCareerProblem): The instance of the CadetCareerProblem class.
    printing (bool): Whether to print status updates or not. Default is False.</p>
<p>Returns:
    dict: The solution dictionary containing the assigned AFSCs for each cadet.</p>
<p>This function assigns Rated AFSCs to ROTC cadets based on their preferences and the existing quotas for each AFSC.
It follows the current rated board algorithm. The function takes an instance of the CadetCareerProblem class as
input and an optional parameter <code>printing</code> to specify whether to print status updates. By default, <code>printing</code> is
set to False. The function initializes the necessary variables and dictionaries for the algorithm. It then goes
through each phase of the rated board algorithm, considering cadets' order of merit and interest levels for each
AFSC. Cadets are assigned AFSCs based on availability and eligibility. The function updates the assigned AFSCs
for each cadet and tracks the number of matched cadets for each AFSC. Finally, it converts the assigned AFSCs into
a solution dictionary and returns it.</p>
<p>Example usage:
    solution = rotc_rated_board_original(instance, printing=True)</p>

            <details class="quote">
              <summary>Source code in <code>afccp/solutions/algorithms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">rotc_rated_board_original</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">printing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Assigns Rated AFSCs to ROTC cadets based on their preferences and the existing quotas for each AFSC using the</span>
<span class="sd">    current rated board algorithm.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        instance (CadetCareerProblem): The instance of the CadetCareerProblem class.</span>
<span class="sd">        printing (bool): Whether to print status updates or not. Default is False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: The solution dictionary containing the assigned AFSCs for each cadet.</span>

<span class="sd">    This function assigns Rated AFSCs to ROTC cadets based on their preferences and the existing quotas for each AFSC.</span>
<span class="sd">    It follows the current rated board algorithm. The function takes an instance of the CadetCareerProblem class as</span>
<span class="sd">    input and an optional parameter `printing` to specify whether to print status updates. By default, `printing` is</span>
<span class="sd">    set to False. The function initializes the necessary variables and dictionaries for the algorithm. It then goes</span>
<span class="sd">    through each phase of the rated board algorithm, considering cadets&#39; order of merit and interest levels for each</span>
<span class="sd">    AFSC. Cadets are assigned AFSCs based on availability and eligibility. The function updates the assigned AFSCs</span>
<span class="sd">    for each cadet and tracks the number of matched cadets for each AFSC. Finally, it converts the assigned AFSCs into</span>
<span class="sd">    a solution dictionary and returns it.</span>

<span class="sd">    Example usage:</span>
<span class="sd">        solution = rotc_rated_board_original(instance, printing=True)</span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="k">if</span> <span class="n">printing</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running status quo ROTC rated algorithm...&quot;</span><span class="p">)</span>

    <span class="c1"># Shorthand</span>
    <span class="n">p</span><span class="p">,</span> <span class="n">mdl_p</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="n">instance</span><span class="o">.</span><span class="n">mdl_p</span>

    <span class="c1"># Cadets/AFSCs and their preferences</span>
    <span class="n">cadet_indices</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;Rated Cadets&#39;</span><span class="p">][</span><span class="s1">&#39;rotc&#39;</span><span class="p">]</span>  <span class="c1"># indices of the cadets in the full set of cadets</span>
    <span class="n">cadets</span><span class="p">,</span> <span class="n">N</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cadet_indices</span><span class="p">)),</span> <span class="nb">len</span><span class="p">(</span><span class="n">cadet_indices</span><span class="p">)</span>
    <span class="n">rated_J</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;J^Rated&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;_U&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;afscs&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]])</span>
    <span class="n">afscs</span><span class="p">,</span> <span class="n">M</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;afscs&#39;</span><span class="p">][</span><span class="n">rated_J</span><span class="p">],</span> <span class="nb">len</span><span class="p">(</span><span class="n">rated_J</span><span class="p">)</span>
    <span class="n">afsc_indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;afscs&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">afsc</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">afsc</span> <span class="ow">in</span> <span class="n">afscs</span><span class="p">])</span>
    <span class="n">afsc_om</span> <span class="o">=</span> <span class="p">{</span><span class="n">afscs</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;rr_om_matrix&#39;</span><span class="p">][:,</span> <span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">M</span><span class="p">)}</span>  <span class="c1"># list of OM percentiles for each AFSC</span>
    <span class="n">afsc_interest</span> <span class="o">=</span> <span class="p">{</span><span class="n">afscs</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;rr_interest_matrix&#39;</span><span class="p">][:,</span> <span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">M</span><span class="p">)}</span>  <span class="c1"># list of Rated interest from cadets</span>
    <span class="n">eligible</span> <span class="o">=</span> <span class="p">{</span><span class="n">afscs</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;rr_om_matrix&#39;</span><span class="p">][:,</span> <span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">M</span><span class="p">)}</span>  <span class="c1"># binary eligibility column for each AFSC</span>

    <span class="c1"># Dictionary of dictionaries of cadets within each order of merit &quot;level&quot; for each AFSC</span>
    <span class="n">om_cl</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;High&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;Med&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">),</span> <span class="s2">&quot;Low&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)}</span>
    <span class="n">om</span> <span class="o">=</span> <span class="p">{</span><span class="n">afsc</span><span class="p">:</span> <span class="p">{</span><span class="n">level</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">afsc_om</span><span class="p">[</span><span class="n">afsc</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">om_cl</span><span class="p">[</span><span class="n">level</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;</span>
                                 <span class="p">(</span><span class="n">afsc_om</span><span class="p">[</span><span class="n">afsc</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">om_cl</span><span class="p">[</span><span class="n">level</span><span class="p">][</span><span class="mi">1</span><span class="p">]))[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="n">om_cl</span><span class="p">}</span> <span class="k">for</span> <span class="n">afsc</span> <span class="ow">in</span> <span class="n">afscs</span><span class="p">}</span>

    <span class="c1"># Dictionary of dictionaries of cadets with each interest &quot;level&quot; for each AFSC</span>
    <span class="n">interest_levels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;High&quot;</span><span class="p">,</span> <span class="s2">&quot;Med&quot;</span><span class="p">,</span> <span class="s2">&quot;Low&quot;</span><span class="p">,</span> <span class="s2">&quot;None&quot;</span><span class="p">]</span>
    <span class="n">interest</span> <span class="o">=</span> <span class="p">{</span><span class="n">afsc</span><span class="p">:</span> <span class="p">{</span><span class="n">level</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">afsc_interest</span><span class="p">[</span><span class="n">afsc</span><span class="p">]</span> <span class="o">==</span> <span class="n">level</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="n">interest_levels</span><span class="p">}</span> <span class="k">for</span> <span class="n">afsc</span> <span class="ow">in</span> <span class="n">afscs</span><span class="p">}</span>

    <span class="c1"># Algorithm initialization</span>
    <span class="n">total_slots</span> <span class="o">=</span> <span class="p">{</span><span class="n">afscs</span><span class="p">[</span><span class="n">idx</span><span class="p">]:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;rotc_quota&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">afsc_indices</span><span class="p">)}</span>
    <span class="n">total_matched</span> <span class="o">=</span> <span class="p">{</span><span class="n">afsc</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">afsc</span> <span class="ow">in</span> <span class="n">afscs</span><span class="p">}</span>  <span class="c1"># Number of matched cadets for each AFSC</span>
    <span class="n">matching</span> <span class="o">=</span> <span class="p">{</span><span class="n">afsc</span><span class="p">:</span> <span class="kc">True</span> <span class="k">for</span> <span class="n">afsc</span> <span class="ow">in</span> <span class="n">afscs</span><span class="p">}</span>  <span class="c1"># Used in stopping conditions</span>
    <span class="n">assigned_afscs</span> <span class="o">=</span> <span class="p">{</span><span class="n">cadet</span><span class="p">:</span> <span class="s2">&quot;&quot;</span> <span class="k">for</span> <span class="n">cadet</span> <span class="ow">in</span> <span class="n">cadets</span><span class="p">}</span>

    <span class="c1"># Initialize solution dictionary</span>
    <span class="n">solution</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;cadets_solved_for&#39;</span><span class="p">:</span> <span class="s1">&#39;ROTC Rated&#39;</span><span class="p">,</span> <span class="s1">&#39;afscs_solved_for&#39;</span><span class="p">:</span> <span class="s1">&#39;Rated&#39;</span><span class="p">,</span> <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;ROTCRatedBoard&#39;</span><span class="p">}</span>

    <span class="c1"># Dictionary of parameters used for the &quot;BubbleChart&quot; object (animation)</span>
    <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;collect_solution_iterations&#39;</span><span class="p">]:</span>
        <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;ROTC Rated Board&#39;</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;matches&#39;</span><span class="p">,</span> <span class="s1">&#39;names&#39;</span><span class="p">]:</span>
            <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Re-order AFSCs if necessary</span>
    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;rotc_rated_board_afsc_order&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">afscs</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;rotc_rated_board_afsc_order&#39;</span><span class="p">]</span>  <span class="c1"># Need to be ordered list of ROTC Rated AFSCs</span>

    <span class="c1"># Phases of the Rated board where each tuple represents the level for (OM, Interest)</span>
    <span class="n">phases</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;High&quot;</span><span class="p">,</span> <span class="s2">&quot;High&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;High&quot;</span><span class="p">,</span> <span class="s2">&quot;Med&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Med&quot;</span><span class="p">,</span> <span class="s2">&quot;High&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Med&quot;</span><span class="p">,</span> <span class="s2">&quot;Med&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Low&quot;</span><span class="p">,</span> <span class="s2">&quot;High&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;High&quot;</span><span class="p">,</span> <span class="s2">&quot;Low&quot;</span><span class="p">),</span>
              <span class="p">(</span><span class="s2">&quot;Low&quot;</span><span class="p">,</span> <span class="s2">&quot;Med&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Med&quot;</span><span class="p">,</span> <span class="s2">&quot;Low&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Low&quot;</span><span class="p">,</span> <span class="s2">&quot;Low&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;High&quot;</span><span class="p">,</span> <span class="s2">&quot;None&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Med&quot;</span><span class="p">,</span> <span class="s2">&quot;None&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Low&quot;</span><span class="p">,</span> <span class="s2">&quot;None&quot;</span><span class="p">)]</span>
    <span class="n">phase_num</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># for solution iterations</span>
    <span class="k">while</span> <span class="nb">any</span><span class="p">(</span><span class="n">matching</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="ow">and</span> <span class="n">phase_num</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">phases</span><span class="p">):</span>
        <span class="n">phase</span> <span class="o">=</span> <span class="n">phases</span><span class="p">[</span><span class="n">phase_num</span><span class="p">]</span>
        <span class="n">om_level</span><span class="p">,</span> <span class="n">interest_level</span> <span class="o">=</span> <span class="n">phase</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">phase</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">phase_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">printing</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Phase&quot;</span><span class="p">,</span> <span class="n">phase_num</span><span class="p">,</span> <span class="n">om_level</span><span class="p">,</span> <span class="s2">&quot;OM&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;&quot;</span><span class="p">,</span> <span class="n">interest_level</span><span class="p">,</span> <span class="s2">&quot;Interest&quot;</span><span class="p">)</span>

        <span class="c1"># Loop through each Rated AFSC</span>
        <span class="k">for</span> <span class="n">afsc</span> <span class="ow">in</span> <span class="n">afscs</span><span class="p">:</span>

            <span class="c1"># Get the ordered list of cadets we&#39;re considering in this phase</span>
            <span class="n">phase_cadets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">intersect1d</span><span class="p">(</span><span class="n">om</span><span class="p">[</span><span class="n">afsc</span><span class="p">][</span><span class="n">om_level</span><span class="p">],</span> <span class="n">interest</span><span class="p">[</span><span class="n">afsc</span><span class="p">][</span><span class="n">interest_level</span><span class="p">])</span>
            <span class="n">om_phase_cadets</span> <span class="o">=</span> <span class="n">afsc_om</span><span class="p">[</span><span class="n">afsc</span><span class="p">][</span><span class="n">phase_cadets</span><span class="p">]</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">om_phase_cadets</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">ordered_cadets</span> <span class="o">=</span> <span class="n">phase_cadets</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>

            <span class="c1"># Loop through each eligible cadet to assign them this AFSC if applicable</span>
            <span class="n">eligible_cadets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">eligible</span><span class="p">[</span><span class="n">afsc</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">cadet</span> <span class="ow">in</span> <span class="n">ordered_cadets</span><span class="p">:</span>

                <span class="c1"># The cadet has to be eligible for the AFSC to be considered</span>
                <span class="k">if</span> <span class="n">cadet</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">eligible_cadets</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="c1"># If we didn&#39;t already assign them an AFSC, and we&#39;ve still got open slots left, the cadet gets matched</span>
                <span class="k">if</span> <span class="n">assigned_afscs</span><span class="p">[</span><span class="n">cadet</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">total_matched</span><span class="p">[</span><span class="n">afsc</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">total_slots</span><span class="p">[</span><span class="n">afsc</span><span class="p">]:</span>
                    <span class="n">assigned_afscs</span><span class="p">[</span><span class="n">cadet</span><span class="p">]</span> <span class="o">=</span> <span class="n">afsc</span>
                    <span class="n">total_matched</span><span class="p">[</span><span class="n">afsc</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="c1"># We&#39;ve reached capacity for this AFSC</span>
                <span class="k">if</span> <span class="n">total_matched</span><span class="p">[</span><span class="n">afsc</span><span class="p">]</span> <span class="o">==</span> <span class="n">total_slots</span><span class="p">[</span><span class="n">afsc</span><span class="p">]:</span>
                    <span class="n">matching</span><span class="p">[</span><span class="n">afsc</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>

            <span class="k">if</span> <span class="n">counter</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">printing</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">afsc</span><span class="p">,</span> <span class="s2">&quot;Phase Matched:&quot;</span><span class="p">,</span> <span class="n">counter</span><span class="p">,</span> <span class="s2">&quot;  ---&gt;   Total Matched:&quot;</span><span class="p">,</span> <span class="n">total_matched</span><span class="p">[</span><span class="n">afsc</span><span class="p">],</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>
                      <span class="n">total_slots</span><span class="p">[</span><span class="n">afsc</span><span class="p">])</span>

            <span class="c1"># Solution Iteration components</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;collect_solution_iterations&#39;</span><span class="p">]:</span>
                <span class="n">afsc_solution</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">10</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">]])</span>
                <span class="k">for</span> <span class="n">cadet</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cadet_indices</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">assigned_afscs</span><span class="p">[</span><span class="n">cadet</span><span class="p">]</span> <span class="ow">in</span> <span class="n">afscs</span><span class="p">:</span>
                        <span class="n">afsc_solution</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">assigned_afscs</span><span class="p">[</span><span class="n">cadet</span><span class="p">]</span>
                <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">afsc_solution</span> <span class="o">==</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">afsc_solution</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span>
                <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="s1">&#39;matches&#39;</span><span class="p">][</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> \
                    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;afscs&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">afsc</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">afsc</span> <span class="ow">in</span> <span class="n">afsc_solution</span><span class="p">])</span>
                <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="s1">&#39;names&#39;</span><span class="p">][</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> \
                    <span class="s2">&quot;Phase &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">phase_num</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; (&quot;</span> <span class="o">+</span> <span class="n">om_level</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="n">interest_level</span> <span class="o">+</span> <span class="s2">&quot;) [&quot;</span> <span class="o">+</span> <span class="n">afsc</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span>

    <span class="c1"># Solution Iteration components</span>
    <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;collect_solution_iterations&#39;</span><span class="p">]:</span>
        <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="s1">&#39;last_s&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-</span> <span class="mi">1</span>

    <span class="c1"># Convert it back to a full solution with all cadets (anyone not matched to a Rated AFSC is unmatched)</span>
    <span class="n">afsc_solution</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">10</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">]])</span>
    <span class="k">for</span> <span class="n">cadet</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cadet_indices</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">assigned_afscs</span><span class="p">[</span><span class="n">cadet</span><span class="p">]</span> <span class="ow">in</span> <span class="n">afscs</span><span class="p">:</span>
            <span class="n">afsc_solution</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">assigned_afscs</span><span class="p">[</span><span class="n">cadet</span><span class="p">]</span>
    <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">afsc_solution</span> <span class="o">==</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">afsc_solution</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span>
    <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;j_array&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;afscs&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">afsc</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">afsc</span> <span class="ow">in</span> <span class="n">afsc_solution</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">solution</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="solutions.algorithms.soc_rated_matching_algorithm" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">soc_rated_matching_algorithm</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">soc</span><span class="o">=</span><span class="s1">&#39;usafa&#39;</span><span class="p">,</span> <span class="n">printing</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#solutions.algorithms.soc_rated_matching_algorithm" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Matches or reserves cadets to their Rated AFSCs based on the Source of Commissioning (SOC) using the Hospitals/Residents algorithm.</p>
<p>Parameters:
    instance (CadetCareerProblem): The instance of the CadetCareerProblem class.
    soc (str): The SOC for which to perform the matching algorithm. Options are 'usafa' (United States Air Force Academy)
               or 'rotc' (Reserve Officer Training Corps). Default is 'usafa'.
    printing (bool): Whether to print status updates or not. Default is True.</p>
<p>Returns:
    tuple: A tuple containing three solution dictionaries: the overall solution, the reserves solution,
        and the matches solution.</p>
<p>This function implements the Hospitals/Residents algorithm to match or reserve cadets to their Rated AFSCs
based on the Source of Commissioning (SOC). It takes an instance of the CadetCareerProblem class as input and
an optional parameter <code>soc</code> to specify the SOC for which the matching algorithm should be performed. The available
options for <code>soc</code> are 'usafa' (United States Air Force Academy) and 'rotc' (Reserve Officer Training Corps). By
default, the SOC is set to 'usafa'. The function also takes an optional parameter <code>printing</code> to control whether
status updates are printed during the matching process.</p>
<p>The algorithm initializes the necessary variables and dictionaries. It then proceeds with the Hospitals/Residents
algorithm by having cadets propose to their top choices and AFSCs accept or reject cadets based on their preferences
and capacities. The matching process continues until all cadets are matched or have exhausted their preferences.
The function tracks the progress through iterations and collects information on both reserved and matched AFSCs.</p>
<p>The function returns a tuple containing three solution dictionaries: the overall solution, the reserves solution,
and the matches solution. Each solution dictionary contains the assigned AFSCs for each cadet. The reserves
solution only includes cadets with reserved slots, the matches solution only includes cadets with matched slots,
and the overall solution includes both cadets with reserved and matched slots.</p>
<p>Example usage:
    solution, reserves, matches = soc_rated_matching_algorithm(instance, soc='usafa', printing=True)</p>

            <details class="quote">
              <summary>Source code in <code>afccp/solutions/algorithms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">soc_rated_matching_algorithm</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">soc</span><span class="o">=</span><span class="s1">&#39;usafa&#39;</span><span class="p">,</span> <span class="n">printing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Matches or reserves cadets to their Rated AFSCs based on the Source of Commissioning (SOC) using the Hospitals/Residents algorithm.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        instance (CadetCareerProblem): The instance of the CadetCareerProblem class.</span>
<span class="sd">        soc (str): The SOC for which to perform the matching algorithm. Options are &#39;usafa&#39; (United States Air Force Academy)</span>
<span class="sd">                   or &#39;rotc&#39; (Reserve Officer Training Corps). Default is &#39;usafa&#39;.</span>
<span class="sd">        printing (bool): Whether to print status updates or not. Default is True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: A tuple containing three solution dictionaries: the overall solution, the reserves solution,</span>
<span class="sd">            and the matches solution.</span>

<span class="sd">    This function implements the Hospitals/Residents algorithm to match or reserve cadets to their Rated AFSCs</span>
<span class="sd">    based on the Source of Commissioning (SOC). It takes an instance of the CadetCareerProblem class as input and</span>
<span class="sd">    an optional parameter `soc` to specify the SOC for which the matching algorithm should be performed. The available</span>
<span class="sd">    options for `soc` are &#39;usafa&#39; (United States Air Force Academy) and &#39;rotc&#39; (Reserve Officer Training Corps). By</span>
<span class="sd">    default, the SOC is set to &#39;usafa&#39;. The function also takes an optional parameter `printing` to control whether</span>
<span class="sd">    status updates are printed during the matching process.</span>

<span class="sd">    The algorithm initializes the necessary variables and dictionaries. It then proceeds with the Hospitals/Residents</span>
<span class="sd">    algorithm by having cadets propose to their top choices and AFSCs accept or reject cadets based on their preferences</span>
<span class="sd">    and capacities. The matching process continues until all cadets are matched or have exhausted their preferences.</span>
<span class="sd">    The function tracks the progress through iterations and collects information on both reserved and matched AFSCs.</span>

<span class="sd">    The function returns a tuple containing three solution dictionaries: the overall solution, the reserves solution,</span>
<span class="sd">    and the matches solution. Each solution dictionary contains the assigned AFSCs for each cadet. The reserves</span>
<span class="sd">    solution only includes cadets with reserved slots, the matches solution only includes cadets with matched slots,</span>
<span class="sd">    and the overall solution includes both cadets with reserved and matched slots.</span>

<span class="sd">    Example usage:</span>
<span class="sd">        solution, reserves, matches = soc_rated_matching_algorithm(instance, soc=&#39;usafa&#39;, printing=True)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">printing</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Solving the rated matching algorithm for &quot;</span> <span class="o">+</span> <span class="n">soc</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot; cadets...&quot;</span><span class="p">)</span>

    <span class="c1"># Shorthand</span>
    <span class="n">p</span><span class="p">,</span> <span class="n">mdl_p</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="n">instance</span><span class="o">.</span><span class="n">mdl_p</span>

    <span class="c1"># Slight change to Rated AFSCs (Remove SOC specific slots)</span>
    <span class="n">rated_afscs</span> <span class="o">=</span> <span class="n">determine_soc_rated_afscs</span><span class="p">(</span><span class="n">soc</span><span class="p">,</span> <span class="n">all_rated_afscs</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;afscs_acc_grp&#39;</span><span class="p">][</span><span class="s2">&quot;Rated&quot;</span><span class="p">])</span>
    <span class="n">rated_J</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;afscs&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">afsc</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">afsc</span> <span class="ow">in</span> <span class="n">rated_afscs</span><span class="p">])</span>

    <span class="c1"># Algorithm initialization</span>
    <span class="n">total_slots</span> <span class="o">=</span> <span class="p">{</span><span class="n">j</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="n">soc</span> <span class="o">+</span> <span class="s2">&quot;_quota&quot;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">rated_J</span><span class="p">}</span>
    <span class="n">cadets</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;Rated Cadets&#39;</span><span class="p">][</span><span class="n">soc</span><span class="p">]</span>
    <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">cadets</span><span class="p">)</span>

    <span class="c1"># &quot;REAL&quot; first choice of the cadet</span>
    <span class="n">first_choice</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;cadet_preferences&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cadets</span><span class="p">}</span>

    <span class="c1"># Dictionary to keep track of what AFSC choice in their list the cadets are proposing to</span>
    <span class="n">cadet_proposal_choice</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cadets</span><span class="p">}</span>  <span class="c1"># Initially all propose to their top Rated preference!</span>

    <span class="c1"># Initialize solution dictionary for all 3 solutions (reserves, matches, combined)</span>
    <span class="n">solution_reserves</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;cadets_solved_for&#39;</span><span class="p">:</span> <span class="n">soc</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; Rated&#39;</span><span class="p">,</span> <span class="s1">&#39;afscs_solved_for&#39;</span><span class="p">:</span> <span class="s1">&#39;Rated&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;Rated &#39;</span> <span class="o">+</span> <span class="n">soc</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; HR (Reserves)&#39;</span><span class="p">}</span>
    <span class="n">solution_matches</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;cadets_solved_for&#39;</span><span class="p">:</span> <span class="n">soc</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; Rated&#39;</span><span class="p">,</span> <span class="s1">&#39;afscs_solved_for&#39;</span><span class="p">:</span> <span class="s1">&#39;Rated&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;Rated &#39;</span> <span class="o">+</span> <span class="n">soc</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; HR (Matches)&#39;</span><span class="p">}</span>
    <span class="n">solution</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;cadets_solved_for&#39;</span><span class="p">:</span> <span class="n">soc</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; Rated&#39;</span><span class="p">,</span> <span class="s1">&#39;afscs_solved_for&#39;</span><span class="p">:</span> <span class="s1">&#39;Rated&#39;</span><span class="p">,</span>  <span class="c1"># Combined Solution</span>
                <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;Rated &#39;</span> <span class="o">+</span> <span class="n">soc</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; HR&#39;</span><span class="p">}</span>

    <span class="c1"># Dictionary of parameters used for the &quot;BubbleChart&quot; object (animation)</span>
    <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;collect_solution_iterations&#39;</span><span class="p">]:</span>
        <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Rated SOC HR&#39;</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;proposals&#39;</span><span class="p">,</span> <span class="s1">&#39;matches&#39;</span><span class="p">,</span> <span class="s1">&#39;reserves&#39;</span><span class="p">,</span> <span class="s1">&#39;matched&#39;</span><span class="p">,</span> <span class="s1">&#39;names&#39;</span><span class="p">]:</span>
            <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Begin the simple Hospital/Residents Algorithm</span>
    <span class="n">total_rejections</span> <span class="o">=</span> <span class="p">{</span><span class="n">j</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">rated_J</span><span class="p">}</span>  <span class="c1"># Number of rejections for each AFSC</span>
    <span class="n">total_matched</span> <span class="o">=</span> <span class="p">{</span><span class="n">j</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">rated_J</span><span class="p">}</span>  <span class="c1"># Number of accepted cadets for each AFSC</span>
    <span class="n">exhausted_cadets</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Will contain the cadets that have exhausted (been rejected by) all of their preferences</span>
    <span class="n">iteration</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># First iteration of the algorithm</span>
    <span class="k">while</span> <span class="nb">sum</span><span class="p">([</span><span class="n">total_matched</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">rated_J</span><span class="p">])</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">exhausted_cadets</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">:</span>  <span class="c1"># Stopping conditions</span>

        <span class="c1"># Cadets propose to their top choice that hasn&#39;t been rejected</span>
        <span class="n">proposals</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;Rated Choices&#39;</span><span class="p">][</span>
            <span class="n">soc</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="n">cadet_proposal_choice</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exhausted_cadets</span> <span class="k">else</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cadets</span><span class="p">}</span>
        <span class="n">proposal_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cadets</span> <span class="k">else</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">]])</span>
        <span class="n">counts</span> <span class="o">=</span> <span class="p">{</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;afscs&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]:</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">proposal_array</span> <span class="o">==</span> <span class="n">j</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">rated_J</span><span class="p">}</span>

        <span class="c1"># Solution Iteration components (Proposals) and print statement</span>
        <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;collect_solution_iterations&#39;</span><span class="p">]:</span>
            <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="s1">&#39;proposals&#39;</span><span class="p">][</span><span class="n">iteration</span><span class="p">]</span> <span class="o">=</span> <span class="n">proposal_array</span>
        <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;ma_printing&#39;</span><span class="p">]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Iteration&quot;</span><span class="p">,</span> <span class="n">iteration</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Initialize matches information for this iteration</span>
        <span class="n">total_matched</span> <span class="o">=</span> <span class="p">{</span><span class="n">j</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">rated_J</span><span class="p">}</span>

        <span class="c1"># AFSCs accept their best cadets and reject the others</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">rated_J</span><span class="p">:</span>

            <span class="c1"># Loop through their preferred cadets from top to bottom</span>
            <span class="n">iteration_rejections</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;afsc_preferences&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cadets</span><span class="p">:</span>
                    <span class="k">continue</span>  <span class="c1"># Other SOC (we don&#39;t care about them right now)</span>

                <span class="c1"># If the cadet is proposing to this AFSC, we have two options</span>
                <span class="k">if</span> <span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">j</span><span class="p">:</span>

                    <span class="c1"># We haven&#39;t hit capacity, so we accept this cadet</span>
                    <span class="k">if</span> <span class="n">total_matched</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">total_slots</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                        <span class="n">total_matched</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

                    <span class="c1"># We&#39;re at capacity, so we reject this cadet</span>
                    <span class="k">else</span><span class="p">:</span>

                        <span class="c1"># Essentially &quot;delete&quot; the preference from the cadet&#39;s list</span>
                        <span class="n">cadet_proposal_choice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span>  <span class="c1"># index of the unmatched AFSC (*)</span>

                        <span class="c1"># Collect additional information</span>
                        <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;ma_printing&#39;</span><span class="p">]:</span>
                            <span class="n">iteration_rejections</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="n">total_rejections</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Solution Iteration components</span>
        <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;collect_solution_iterations&#39;</span><span class="p">]:</span>

            <span class="c1"># Rated matches from this iteration</span>
            <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="s1">&#39;matches&#39;</span><span class="p">][</span><span class="n">iteration</span><span class="p">]</span> <span class="o">=</span> \
                <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cadets</span> <span class="k">else</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">]])</span>
            <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="s1">&#39;names&#39;</span><span class="p">][</span><span class="n">iteration</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Iteration &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">iteration</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

            <span class="c1"># Collect information on this iteration&#39;s reserved slots and actual matched slots</span>
            <span class="n">reserves</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
            <span class="n">matches</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">]:</span>

                <span class="c1"># Default to unmatched</span>
                <span class="n">reserves</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">matches</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cadets</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="n">rated_J</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">first_choice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                            <span class="n">matches</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">reserves</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

            <span class="c1"># Set of cadets with reserved or matched slots</span>
            <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="s1">&#39;matched&#39;</span><span class="p">][</span><span class="n">iteration</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">matches</span> <span class="o">!=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="s1">&#39;reserves&#39;</span><span class="p">][</span><span class="n">iteration</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">reserves</span> <span class="o">!=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># Specific matching algorithm print statement</span>
        <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;ma_printing&#39;</span><span class="p">]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Proposals:&#39;</span><span class="p">,</span> <span class="n">counts</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Matched&#39;</span><span class="p">,</span> <span class="p">{</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;afscs&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]:</span> <span class="n">total_matched</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">rated_J</span><span class="p">})</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Rejected&#39;</span><span class="p">,</span> <span class="p">{</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;afscs&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]:</span> <span class="n">total_rejections</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">rated_J</span><span class="p">})</span>

        <span class="c1"># Check exhausted cadets</span>
        <span class="n">exhausted_cadets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cadets</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cadet_proposal_choice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;Num Rated Choices&#39;</span><span class="p">][</span><span class="n">soc</span><span class="p">][</span><span class="n">i</span><span class="p">]:</span>
                <span class="n">exhausted_cadets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="n">iteration</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># Next iteration!</span>

    <span class="c1"># Last solution iteration</span>
    <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;collect_solution_iterations&#39;</span><span class="p">]:</span>
        <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">][</span><span class="s1">&#39;last_s&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">iteration</span> <span class="o">-</span> <span class="mi">1</span>

    <span class="c1"># Collect information on all 3 solutions: reserves, matches, and combined</span>
    <span class="n">solution_reserves</span><span class="p">[</span><span class="s1">&#39;j_array&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">solution_matches</span><span class="p">[</span><span class="s1">&#39;j_array&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;j_array&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">]:</span>

        <span class="c1"># Default to unmatched</span>
        <span class="n">solution_matches</span><span class="p">[</span><span class="s1">&#39;j_array&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">solution_reserves</span><span class="p">[</span><span class="s1">&#39;j_array&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span>
        <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;j_array&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cadets</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="n">rated_J</span><span class="p">:</span>
                <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;j_array&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">first_choice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                    <span class="n">solution_matches</span><span class="p">[</span><span class="s1">&#39;j_array&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">solution_reserves</span><span class="p">[</span><span class="s1">&#39;j_array&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">proposals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="c1"># Add information to the solution matches and reserves components</span>
    <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;matches&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">solution_matches</span><span class="p">[</span><span class="s1">&#39;j_array&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;reserves&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">solution_reserves</span><span class="p">[</span><span class="s1">&#39;j_array&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Return solution, reserved array, and solution iterations</span>
    <span class="k">return</span> <span class="n">solution</span><span class="p">,</span> <span class="n">solution_reserves</span><span class="p">,</span> <span class="n">solution_matches</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="solutions.algorithms.vft_genetic_algorithm" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">vft_genetic_algorithm</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">initial_solutions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">con_fail_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">printing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#solutions.algorithms.vft_genetic_algorithm" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Solves the optimization problem using a genetic algorithm.</p>
<p>Parameters:
    instance (CadetCareerProblem): An instance of the CadetCareerProblem class representing the optimization problem.
    initial_solutions (ndarray or None): An optional array of initial solutions in the population. If provided, it
        should be a numpy ndarray of shape (pop_size, N) where pop_size is the size of the population and N is the
        number of cadets. Default is None.
    con_fail_dict (dict or None): An optional dictionary containing information about constraints that failed for
        the initial solutions. It should be a dictionary where the keys are the indices of the initial solutions
        (0-based) and the values are lists of constraint indices that failed for that solution. Default is None.
    printing (bool): A flag indicating whether to print status updates during the genetic algorithm execution.
        Default is False.</p>
<p>Returns:
    tuple: A tuple containing the best solution and the time evaluation dataframe (if time evaluation is enabled).</p>
<p>This function implements a genetic algorithm to solve the optimization problem defined by the CadetCareerProblem
instance. The genetic algorithm works by iteratively evolving a population of candidate solutions through selection,
crossover, and mutation operations. The fitness of each solution is evaluated using the Value-Focused Thinking (VFT)
objective function.</p>
<p>The genetic algorithm operates as follows:
1. Initialize the population: If initial_solutions are provided, they are used as the initial population. Otherwise,
   a random population is generated.
2. Evaluate the fitness of each solution in the population using the VFT objective function.
3. Sort the population based on the fitness scores in descending order.
4. Create the next generation of solutions:
   - The top two solutions (best fitness) from the current population are automatically included in the next generation.
   - For the remaining solutions, select two parents based on their fitness scores using rank selection.
   - Apply multi-point crossover to generate two offspring solutions from the selected parents.
   - Perform mutation on the offspring solutions to introduce small random changes.
   - Add the offspring solutions to the next generation.
5. Repeat steps 2-4 until the termination condition is met (e.g., maximum time limit).</p>
<p>The best solution found during the genetic algorithm execution is returned as the output. If time evaluation is
enabled, a time evaluation dataframe is also returned, containing the objective values at different time points
during the algorithm execution.</p>
<p>Example usage:
    solution, time_eval_df = vft_genetic_algorithm(instance, initial_solutions, con_fail_dict, printing=True)</p>

            <details class="quote">
              <summary>Source code in <code>afccp/solutions/algorithms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">vft_genetic_algorithm</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">initial_solutions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">con_fail_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">printing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Solves the optimization problem using a genetic algorithm.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        instance (CadetCareerProblem): An instance of the CadetCareerProblem class representing the optimization problem.</span>
<span class="sd">        initial_solutions (ndarray or None): An optional array of initial solutions in the population. If provided, it</span>
<span class="sd">            should be a numpy ndarray of shape (pop_size, N) where pop_size is the size of the population and N is the</span>
<span class="sd">            number of cadets. Default is None.</span>
<span class="sd">        con_fail_dict (dict or None): An optional dictionary containing information about constraints that failed for</span>
<span class="sd">            the initial solutions. It should be a dictionary where the keys are the indices of the initial solutions</span>
<span class="sd">            (0-based) and the values are lists of constraint indices that failed for that solution. Default is None.</span>
<span class="sd">        printing (bool): A flag indicating whether to print status updates during the genetic algorithm execution.</span>
<span class="sd">            Default is False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: A tuple containing the best solution and the time evaluation dataframe (if time evaluation is enabled).</span>

<span class="sd">    This function implements a genetic algorithm to solve the optimization problem defined by the CadetCareerProblem</span>
<span class="sd">    instance. The genetic algorithm works by iteratively evolving a population of candidate solutions through selection,</span>
<span class="sd">    crossover, and mutation operations. The fitness of each solution is evaluated using the Value-Focused Thinking (VFT)</span>
<span class="sd">    objective function.</span>

<span class="sd">    The genetic algorithm operates as follows:</span>
<span class="sd">    1. Initialize the population: If initial_solutions are provided, they are used as the initial population. Otherwise,</span>
<span class="sd">       a random population is generated.</span>
<span class="sd">    2. Evaluate the fitness of each solution in the population using the VFT objective function.</span>
<span class="sd">    3. Sort the population based on the fitness scores in descending order.</span>
<span class="sd">    4. Create the next generation of solutions:</span>
<span class="sd">       - The top two solutions (best fitness) from the current population are automatically included in the next generation.</span>
<span class="sd">       - For the remaining solutions, select two parents based on their fitness scores using rank selection.</span>
<span class="sd">       - Apply multi-point crossover to generate two offspring solutions from the selected parents.</span>
<span class="sd">       - Perform mutation on the offspring solutions to introduce small random changes.</span>
<span class="sd">       - Add the offspring solutions to the next generation.</span>
<span class="sd">    5. Repeat steps 2-4 until the termination condition is met (e.g., maximum time limit).</span>

<span class="sd">    The best solution found during the genetic algorithm execution is returned as the output. If time evaluation is</span>
<span class="sd">    enabled, a time evaluation dataframe is also returned, containing the objective values at different time points</span>
<span class="sd">    during the algorithm execution.</span>

<span class="sd">    Example usage:</span>
<span class="sd">        solution, time_eval_df = vft_genetic_algorithm(instance, initial_solutions, con_fail_dict, printing=True)</span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="k">def</span> <span class="nf">multi_point_crossover</span><span class="p">(</span><span class="n">genome1</span><span class="p">,</span> <span class="n">genome2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Take two parent genomes, crossover the genes at multiple points and return two offspring solutions</span>
<span class="sd">        :param genome1: first parent genome</span>
<span class="sd">        :param genome2: second parent genome</span>
<span class="sd">        :return: offspring</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">crossover_positions</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">mp</span><span class="p">[</span><span class="s2">&quot;num_crossover_points&quot;</span><span class="p">],</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
        <span class="n">start_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">points</span><span class="p">)</span>
        <span class="n">stop_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">child1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">child2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">flip</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">start_points</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">flip</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">child1</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">genome2</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">child2</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">genome1</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">child1</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">genome1</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">child2</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">genome2</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>

            <span class="n">flip</span> <span class="o">=</span> <span class="n">flip</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>

        <span class="k">return</span> <span class="n">child1</span><span class="p">,</span> <span class="n">child2</span>

    <span class="k">def</span> <span class="nf">mutation</span><span class="p">(</span><span class="n">genome</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Takes a genome, and picks a random cadet index to mutate with some probability.</span>
<span class="sd">        This means we can swap an AFSC for one cadet individually</span>
<span class="sd">        :param genome: solution vector</span>
<span class="sd">        :return: mutated genome</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mp</span><span class="p">[</span><span class="s2">&quot;num_mutations&quot;</span><span class="p">]):</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;I^Variable&#39;</span><span class="p">])</span>  <span class="c1"># Pick a random cadet that doesn&#39;t have a &quot;fixed&quot; AFSC</span>

            <span class="k">if</span> <span class="n">mp</span><span class="p">[</span><span class="s1">&#39;mutation_function&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;cadet_choice&#39;</span><span class="p">:</span>

                <span class="c1"># Determine what set of AFSCs we can choose from (Coin flip on if we&#39;re going to select more preferred ones)</span>
                <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">mp</span><span class="p">[</span><span class="s1">&#39;preference_mutation_rate&#39;</span><span class="p">]:</span>

                    <span class="c1"># Current preference that the cadet received</span>
                    <span class="n">current_choice</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;c_pref_matrix&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">,</span> <span class="n">genome</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>

                    <span class="c1"># All AFSCs that are at least as preferred as current assigned</span>
                    <span class="n">possible_afscs</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;cadet_preferences&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">][:</span><span class="n">current_choice</span><span class="p">]</span>

                <span class="k">else</span><span class="p">:</span>

                    <span class="c1"># All AFSCs that the cadet is eligible for</span>
                    <span class="n">possible_afscs</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;J^E&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>

                <span class="c1"># All AFSCs that the cadet is eligible for</span>
                <span class="n">possible_afscs</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;J^E&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>

            <span class="c1"># Fix the possible AFSCs to select from if this cadet has a reserved Rated slot</span>
            <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;J^Reserved&#39;</span><span class="p">]:</span>
                <span class="n">possible_afscs</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;J^Reserved&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>

            <span class="c1"># Pick a random AFSC</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">possible_afscs</span><span class="p">)</span>

            <span class="c1"># Mutate if applicable</span>
            <span class="n">genome</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span> <span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;mutation_rate&quot;</span><span class="p">])</span> <span class="k">else</span> <span class="n">genome</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">genome</span>

    <span class="c1"># Shorthand</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">parameters</span>
    <span class="n">vp</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">value_parameters</span>
    <span class="n">mp</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">mdl_p</span>

    <span class="c1"># Cadets that aren&#39;t &quot;fixed&quot; in the solution</span>
    <span class="n">p</span><span class="p">[</span><span class="s1">&#39;I^Variable&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;J^Fixed&#39;</span><span class="p">]])</span>

    <span class="c1"># Rank Selection Parameters</span>
    <span class="n">rank_weights</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;pop_size&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">**</span> <span class="mf">1.2</span>
    <span class="n">rank_weights</span> <span class="o">=</span> <span class="n">rank_weights</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">rank_weights</span><span class="p">)</span>
    <span class="n">rank_choices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">mp</span><span class="p">[</span><span class="s2">&quot;pop_size&quot;</span><span class="p">])</span>

    <span class="c1"># Multi-Point Crossover Parameters</span>
    <span class="n">crossover_positions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Initialize Population</span>
    <span class="n">population</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;J^E&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">]]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mp</span><span class="p">[</span><span class="s2">&quot;pop_size&quot;</span><span class="p">])])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">initial_solutions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

        <span class="c1"># Get fitness of initial_solutions in case there are feasibility issues or there are too many initial solutions</span>
        <span class="n">num_initial</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">initial_solutions</span><span class="p">)</span>
        <span class="n">fitness</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_initial</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">chromosome</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">initial_solutions</span><span class="p">):</span>
            <span class="n">fitness</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">afccp</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">handling</span><span class="o">.</span><span class="n">fitness_function</span><span class="p">(</span><span class="n">chromosome</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">vp</span><span class="p">,</span> <span class="n">mp</span><span class="p">,</span> <span class="n">con_fail_dict</span><span class="p">)</span>

        <span class="c1"># Sort Initial solutions by Fitness</span>
        <span class="n">sorted_indices</span> <span class="o">=</span> <span class="n">fitness</span><span class="o">.</span><span class="n">argsort</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">initial_solutions</span> <span class="o">=</span> <span class="n">initial_solutions</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">]</span>

        <span class="c1"># Insert these solutions into the population</span>
        <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">chromosome</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">initial_solutions</span><span class="p">):</span>

            <span class="c1"># Make sure there aren&#39;t too many initial solutions</span>
            <span class="k">if</span> <span class="n">s</span> <span class="o">&lt;</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;pop_size&quot;</span><span class="p">]:</span>
                <span class="n">population</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">chromosome</span>

    <span class="c1"># Initialize Fitness Scores</span>
    <span class="n">fitness</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">mp</span><span class="p">[</span><span class="s2">&quot;pop_size&quot;</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">chromosome</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">population</span><span class="p">):</span>
        <span class="n">fitness</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">afccp</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">handling</span><span class="o">.</span><span class="n">fitness_function</span><span class="p">(</span><span class="n">chromosome</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">vp</span><span class="p">,</span> <span class="n">mp</span><span class="p">,</span> <span class="n">con_fail_dict</span><span class="p">)</span>

    <span class="c1"># Sort Population by Fitness</span>
    <span class="n">sorted_indices</span> <span class="o">=</span> <span class="n">fitness</span><span class="o">.</span><span class="n">argsort</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">fitness</span> <span class="o">=</span> <span class="n">fitness</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">]</span>
    <span class="n">population</span> <span class="o">=</span> <span class="n">population</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">]</span>

    <span class="c1"># Print updates</span>
    <span class="k">if</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;ga_printing&quot;</span><span class="p">]:</span>
        <span class="n">step</span> <span class="o">=</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;ga_max_time&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="mi">100</span> <span class="o">/</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;percent_step&quot;</span><span class="p">])</span>
        <span class="n">checkpoint</span> <span class="o">=</span> <span class="n">step</span>
        <span class="n">completed</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Initial Fitness Scores&#39;</span><span class="p">,</span> <span class="n">fitness</span><span class="p">)</span>

    <span class="c1"># Time Evaluation Initialization</span>
    <span class="k">if</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;time_eval&quot;</span><span class="p">]:</span>
        <span class="n">time_step</span> <span class="o">=</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;ga_max_time&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;num_time_points&quot;</span><span class="p">]</span>
        <span class="n">step_num</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">times</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="p">[</span><span class="n">fitness</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>

    <span class="c1"># Main Loop</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
    <span class="n">eval_times</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">gen_times</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">generating</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">generation</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">generating</span><span class="p">:</span>

        <span class="c1"># Start time</span>
        <span class="n">gen_start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>

        <span class="c1"># Evaluate Population</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;pop_size&quot;</span><span class="p">]):</span>
            <span class="n">fitness</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">afccp</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">handling</span><span class="o">.</span><span class="n">fitness_function</span><span class="p">(</span><span class="n">population</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">p</span><span class="p">,</span> <span class="n">vp</span><span class="p">,</span> <span class="n">mp</span><span class="p">,</span> <span class="n">con_fail_dict</span><span class="p">)</span>
        <span class="n">eval_times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">gen_start_time</span><span class="p">)</span>

        <span class="c1"># Sort Population by Fitness</span>
        <span class="n">sorted_indices</span> <span class="o">=</span> <span class="n">fitness</span><span class="o">.</span><span class="n">argsort</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">fitness</span> <span class="o">=</span> <span class="n">fitness</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">]</span>
        <span class="n">population</span> <span class="o">=</span> <span class="n">population</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">]</span>
        <span class="n">best_score</span> <span class="o">=</span> <span class="n">fitness</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># Printing updates</span>
        <span class="k">if</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;ga_printing&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">checkpoint</span><span class="p">:</span>
                <span class="n">completed</span> <span class="o">+=</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;percent_step&quot;</span><span class="p">]</span>
                <span class="n">checkpoint</span> <span class="o">+=</span> <span class="n">step</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">completed</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="si">% c</span><span class="s2">omplete. Best solution value: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">best_score</span><span class="p">,</span> <span class="mi">4</span><span class="p">)))</span>
                <span class="n">avg_eval_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">eval_times</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">generation</span><span class="p">]))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Average evaluation time for &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mp</span><span class="p">[</span><span class="s2">&quot;pop_size&quot;</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39; solutions: &#39;</span> <span class="o">+</span>
                      <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">avg_eval_time</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39; seconds.&#39;</span><span class="p">)</span>
                <span class="n">avg_gen_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">gen_times</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">generation</span><span class="p">]))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Average generation time: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">avg_gen_time</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39; seconds.&#39;</span><span class="p">)</span>

        <span class="c1"># Create next generation</span>
        <span class="n">next_generation</span> <span class="o">=</span> <span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># the best two solutions are kept for the next generation</span>
        <span class="k">for</span> <span class="n">twins</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">((</span><span class="n">mp</span><span class="p">[</span><span class="s2">&quot;pop_size&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)):</span>  <span class="c1"># create the offspring</span>

            <span class="c1"># Select parents for mating</span>
            <span class="n">index_1</span><span class="p">,</span> <span class="n">index_2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">rank_choices</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">rank_weights</span><span class="p">)</span>
            <span class="n">parent_1</span><span class="p">,</span> <span class="n">parent_2</span> <span class="o">=</span> <span class="n">population</span><span class="p">[</span><span class="n">index_1</span><span class="p">],</span> <span class="n">population</span><span class="p">[</span><span class="n">index_2</span><span class="p">]</span>

            <span class="c1"># Apply crossover function</span>
            <span class="n">offspring_1</span><span class="p">,</span> <span class="n">offspring_2</span> <span class="o">=</span> <span class="n">multi_point_crossover</span><span class="p">(</span><span class="n">parent_1</span><span class="p">,</span> <span class="n">parent_2</span><span class="p">)</span>

            <span class="c1"># Mutate genomes of offspring</span>
            <span class="n">offspring_1</span> <span class="o">=</span> <span class="n">mutation</span><span class="p">(</span><span class="n">offspring_1</span><span class="p">)</span>
            <span class="n">offspring_2</span> <span class="o">=</span> <span class="n">mutation</span><span class="p">(</span><span class="n">offspring_2</span><span class="p">)</span>

            <span class="c1"># Add this pair to the next generation</span>
            <span class="n">offsprings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">offspring_1</span><span class="p">,</span> <span class="n">offspring_2</span><span class="p">))</span>
            <span class="n">next_generation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">next_generation</span><span class="p">,</span> <span class="n">offsprings</span><span class="p">))</span>

        <span class="c1"># Time Eval</span>
        <span class="k">if</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;time_eval&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">time_step</span> <span class="o">*</span> <span class="n">step_num</span><span class="p">):</span>
                <span class="n">times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
                <span class="n">scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_score</span><span class="p">)</span>
                <span class="n">step_num</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Check stopping criteria</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;ga_max_time&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;ga_printing&quot;</span><span class="p">]:</span>
                <span class="n">end_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;End time reached in &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">end_time</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; seconds.&#39;</span><span class="p">)</span>
            <span class="n">generating</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Next Generation</span>
        <span class="n">population</span> <span class="o">=</span> <span class="n">next_generation</span>
        <span class="n">gen_times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">gen_start_time</span><span class="p">)</span>
        <span class="n">generation</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># Acquire solution dictionary for the top chromosome in the population</span>
    <span class="n">solution</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;VFT_Genetic&#39;</span><span class="p">,</span> <span class="s1">&#39;j_array&#39;</span><span class="p">:</span> <span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span>

    <span class="c1"># Time Eval</span>
    <span class="k">if</span> <span class="n">mp</span><span class="p">[</span><span class="s2">&quot;time_eval&quot;</span><span class="p">]:</span>

        <span class="c1"># Create time_eval_df</span>
        <span class="n">time_eval_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Time&#39;</span><span class="p">:</span> <span class="n">times</span><span class="p">,</span> <span class="s1">&#39;Objective Value&#39;</span><span class="p">:</span> <span class="n">scores</span><span class="p">})</span>

        <span class="k">if</span> <span class="n">printing</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">time_eval_df</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">solution</span><span class="p">,</span> <span class="n">time_eval_df</span>

    <span class="k">else</span><span class="p">:</span>

        <span class="c1"># Return best solution</span>
        <span class="k">return</span> <span class="n">solution</span><span class="p">,</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="solutions.algorithms.genetic_matching_algorithm" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">genetic_matching_algorithm</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">printing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#solutions.algorithms.genetic_matching_algorithm" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Genetic algorithm that determines optimal capacities to the classic deferred acceptance algorithm to minimize
blocking pairs</p>
<p>Parameters:
    instance (CadetCareerProblem): An instance of the CadetCareerProblem class representing the optimization problem.
    printing (bool): A flag indicating whether to print additional information during the algorithm execution.
        Default is False.</p>
<p>Returns:
    ndarray: An array representing the optimal capacities determined by the genetic algorithm.</p>
<p>This function implements a genetic algorithm to determine the optimal capacities for the classic deferred acceptance
algorithm. The goal is to minimize the number of blocking pairs in the matching process.</p>
<p>The genetic algorithm works as follows:
1. Initialize the population of capacities randomly. Each capacity is selected within the valid range for the
   corresponding AFSC.
2. Evaluate the fitness of each capacity configuration using the classic deferred acceptance algorithm with the
   given capacities. The fitness is determined by the number of blocking pairs in the resulting matching.
3. Sort the population based on fitness scores in descending order.
4. Create the next generation of capacities:
   - The two best capacities (lowest fitness) from the current population are automatically included in the next
     generation.
   - For the remaining capacities, select two parents based on their fitness scores using rank selection.
   - Apply multi-point crossover to generate two offspring capacities from the selected parents.
   - Perform mutation on the offspring capacities to introduce small random changes.
   - Add the offspring capacities to the next generation.
5. Repeat steps 2-4 until a termination condition is met (e.g., maximum time or number of generations).</p>
<p>The best capacity configuration found during the genetic algorithm execution is returned as the output.</p>
<p>Example usage:
    optimal_capacities = genetic_matching_algorithm(instance, printing=True)</p>

            <details class="quote">
              <summary>Source code in <code>afccp/solutions/algorithms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">genetic_matching_algorithm</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">printing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Genetic algorithm that determines optimal capacities to the classic deferred acceptance algorithm to minimize</span>
<span class="sd">    blocking pairs</span>

<span class="sd">    Parameters:</span>
<span class="sd">        instance (CadetCareerProblem): An instance of the CadetCareerProblem class representing the optimization problem.</span>
<span class="sd">        printing (bool): A flag indicating whether to print additional information during the algorithm execution.</span>
<span class="sd">            Default is False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ndarray: An array representing the optimal capacities determined by the genetic algorithm.</span>

<span class="sd">    This function implements a genetic algorithm to determine the optimal capacities for the classic deferred acceptance</span>
<span class="sd">    algorithm. The goal is to minimize the number of blocking pairs in the matching process.</span>

<span class="sd">    The genetic algorithm works as follows:</span>
<span class="sd">    1. Initialize the population of capacities randomly. Each capacity is selected within the valid range for the</span>
<span class="sd">       corresponding AFSC.</span>
<span class="sd">    2. Evaluate the fitness of each capacity configuration using the classic deferred acceptance algorithm with the</span>
<span class="sd">       given capacities. The fitness is determined by the number of blocking pairs in the resulting matching.</span>
<span class="sd">    3. Sort the population based on fitness scores in descending order.</span>
<span class="sd">    4. Create the next generation of capacities:</span>
<span class="sd">       - The two best capacities (lowest fitness) from the current population are automatically included in the next</span>
<span class="sd">         generation.</span>
<span class="sd">       - For the remaining capacities, select two parents based on their fitness scores using rank selection.</span>
<span class="sd">       - Apply multi-point crossover to generate two offspring capacities from the selected parents.</span>
<span class="sd">       - Perform mutation on the offspring capacities to introduce small random changes.</span>
<span class="sd">       - Add the offspring capacities to the next generation.</span>
<span class="sd">    5. Repeat steps 2-4 until a termination condition is met (e.g., maximum time or number of generations).</span>

<span class="sd">    The best capacity configuration found during the genetic algorithm execution is returned as the output.</span>

<span class="sd">    Example usage:</span>
<span class="sd">        optimal_capacities = genetic_matching_algorithm(instance, printing=True)</span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="c1"># Shorthand</span>
    <span class="n">p</span><span class="p">,</span> <span class="n">vp</span><span class="p">,</span> <span class="n">mdl_p</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="n">instance</span><span class="o">.</span><span class="n">value_parameters</span><span class="p">,</span> <span class="n">instance</span><span class="o">.</span><span class="n">mdl_p</span>

    <span class="c1"># Define functions</span>
    <span class="k">def</span> <span class="nf">initialize_population</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function to initialize all the &quot;chromosomes&quot; for this GA</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">population</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;gma_pop_size&#39;</span><span class="p">])])</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;gma_pop_size&#39;</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;J&#39;</span><span class="p">]:</span>
                <span class="n">capacity</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">capacity_options</span><span class="p">[</span><span class="n">j</span><span class="p">]))</span>
                <span class="n">population</span><span class="p">[</span><span class="n">c</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">capacity</span>

        <span class="k">return</span> <span class="n">population</span>

    <span class="k">def</span> <span class="nf">fitness_function</span><span class="p">(</span><span class="n">chromosome</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Evaluates the chromosome (capacities for HR)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Run the algorithm using these capacities</span>
        <span class="n">solution</span> <span class="o">=</span> <span class="n">classic_hr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">capacities</span><span class="o">=</span><span class="n">chromosome</span><span class="p">,</span> <span class="n">printing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Evaluate blocking pairs</span>
        <span class="k">return</span> <span class="n">afccp</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">handling</span><span class="o">.</span><span class="n">calculate_blocking_pairs</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">only_return_count</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">multi_point_crossover</span><span class="p">(</span><span class="n">genome1</span><span class="p">,</span> <span class="n">genome2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Take two parent genomes, crossover the genes at multiple points and return two offspring solutions</span>
<span class="sd">        :param genome1: first parent genome</span>
<span class="sd">        :param genome2: second parent genome</span>
<span class="sd">        :return: offspring</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">crossover_positions</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">mdl_p</span><span class="p">[</span><span class="s2">&quot;gma_num_crossover_points&quot;</span><span class="p">],</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
        <span class="n">start_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">points</span><span class="p">)</span>
        <span class="n">stop_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">child1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">child2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">flip</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">start_points</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">flip</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">child1</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">genome2</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">child2</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">genome1</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">child1</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">genome1</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">child2</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">genome2</span><span class="p">[</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">stop_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>

            <span class="n">flip</span> <span class="o">=</span> <span class="n">flip</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>

        <span class="k">return</span> <span class="n">child1</span><span class="p">,</span> <span class="n">child2</span>

    <span class="k">def</span> <span class="nf">mutation</span><span class="p">(</span><span class="n">genome</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Takes a genome, and picks a random cadet index to mutate with some probability.</span>
<span class="sd">        This means we can swap an AFSC for one cadet individually</span>
<span class="sd">        :param genome: solution vector</span>
<span class="sd">        :return: mutated genome</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mdl_p</span><span class="p">[</span><span class="s2">&quot;gma_mutations&quot;</span><span class="p">]):</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;J&#39;</span><span class="p">])</span>  <span class="c1"># Random AFSC</span>

            <span class="c1"># Pick random new capacity for AFSC j</span>
            <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;quota_min&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;quota_max&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
            <span class="n">capacity_options</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
            <span class="n">capacity</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">capacity_options</span><span class="p">))</span>
            <span class="n">genome</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">capacity</span> <span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s2">&quot;gma_mutation_rate&quot;</span><span class="p">])</span> <span class="k">else</span> <span class="n">genome</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">genome</span>

    <span class="c1"># Determine range of capacities for all AFSCs</span>
    <span class="n">capacity_options</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;J&#39;</span><span class="p">]:</span>
        <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;quota_min&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;quota_max&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
        <span class="n">capacity_options</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

    <span class="c1"># Rank Selection Parameters</span>
    <span class="n">rank_weights</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s2">&quot;gma_pop_size&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">**</span> <span class="mf">1.2</span>
    <span class="n">rank_weights</span> <span class="o">=</span> <span class="n">rank_weights</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">rank_weights</span><span class="p">)</span>
    <span class="n">rank_choices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">mdl_p</span><span class="p">[</span><span class="s2">&quot;gma_pop_size&quot;</span><span class="p">])</span>

    <span class="c1"># Multi-Point Crossover Parameters</span>
    <span class="n">crossover_positions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Initialize population</span>
    <span class="n">population</span> <span class="o">=</span> <span class="n">initialize_population</span><span class="p">()</span>

    <span class="c1"># Initialize fitness scores</span>
    <span class="n">fitness</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;gma_pop_size&#39;</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;gma_pop_size&#39;</span><span class="p">]):</span>
        <span class="n">fitness</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitness_function</span><span class="p">(</span><span class="n">population</span><span class="p">[</span><span class="n">c</span><span class="p">])</span>

    <span class="c1"># Sort Population by Fitness</span>
    <span class="n">sorted_indices</span> <span class="o">=</span> <span class="n">fitness</span><span class="o">.</span><span class="n">argsort</span><span class="p">()</span>
    <span class="n">fitness</span> <span class="o">=</span> <span class="n">fitness</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">]</span>
    <span class="n">population</span> <span class="o">=</span> <span class="n">population</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">]</span>

    <span class="c1"># Main Loop</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
    <span class="n">generation</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">generating</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">while</span> <span class="n">generating</span><span class="p">:</span>

        <span class="c1"># Evaluate population</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;gma_pop_size&#39;</span><span class="p">]):</span>
            <span class="n">fitness</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitness_function</span><span class="p">(</span><span class="n">population</span><span class="p">[</span><span class="n">c</span><span class="p">])</span>

        <span class="c1"># Sort Population by Fitness</span>
        <span class="n">sorted_indices</span> <span class="o">=</span> <span class="n">fitness</span><span class="o">.</span><span class="n">argsort</span><span class="p">()</span>
        <span class="n">fitness</span> <span class="o">=</span> <span class="n">fitness</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">]</span>
        <span class="n">population</span> <span class="o">=</span> <span class="n">population</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">]</span>

        <span class="c1"># Print statements</span>
        <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;gma_printing&#39;</span><span class="p">]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Generation&#39;</span><span class="p">,</span> <span class="n">generation</span><span class="p">,</span> <span class="s1">&#39;Fitness&#39;</span><span class="p">,</span> <span class="n">fitness</span><span class="p">)</span>

        <span class="c1"># Create next generation</span>
        <span class="n">next_generation</span> <span class="o">=</span> <span class="n">population</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># the best two solutions are kept for the next generation</span>
        <span class="k">for</span> <span class="n">twins</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">((</span><span class="n">mdl_p</span><span class="p">[</span><span class="s2">&quot;gma_pop_size&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)):</span>  <span class="c1"># create the offspring</span>

            <span class="c1"># Select parents for mating</span>
            <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">rank_choices</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">rank_weights</span><span class="p">)</span>
            <span class="n">parent_1</span><span class="p">,</span> <span class="n">parent_2</span> <span class="o">=</span> <span class="n">population</span><span class="p">[</span><span class="n">c1</span><span class="p">],</span> <span class="n">population</span><span class="p">[</span><span class="n">c2</span><span class="p">]</span>

            <span class="c1"># Apply crossover function</span>
            <span class="n">offspring_1</span><span class="p">,</span> <span class="n">offspring_2</span> <span class="o">=</span> <span class="n">multi_point_crossover</span><span class="p">(</span><span class="n">parent_1</span><span class="p">,</span> <span class="n">parent_2</span><span class="p">)</span>

            <span class="c1"># Mutate genomes of offspring</span>
            <span class="n">offspring_1</span> <span class="o">=</span> <span class="n">mutation</span><span class="p">(</span><span class="n">offspring_1</span><span class="p">)</span>
            <span class="n">offspring_2</span> <span class="o">=</span> <span class="n">mutation</span><span class="p">(</span><span class="n">offspring_2</span><span class="p">)</span>

            <span class="c1"># Add this pair to the next generation</span>
            <span class="n">offsprings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">offspring_1</span><span class="p">,</span> <span class="n">offspring_2</span><span class="p">))</span>
            <span class="n">next_generation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">next_generation</span><span class="p">,</span> <span class="n">offsprings</span><span class="p">))</span>

        <span class="c1"># Next Generation</span>
        <span class="n">population</span> <span class="o">=</span> <span class="n">next_generation</span>
        <span class="n">generation</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Stopping conditions</span>
        <span class="k">if</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;stopping_conditions&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Time&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;gma_max_time&#39;</span><span class="p">]:</span>
                <span class="n">generating</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;stopping_conditions&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Generations&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">generation</span> <span class="o">&gt;=</span> <span class="n">mdl_p</span><span class="p">[</span><span class="s1">&#39;gma_num_generations&#39;</span><span class="p">]:</span>
                <span class="n">generating</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># We have no blocking pairs!</span>
        <span class="k">if</span> <span class="n">fitness</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">generating</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="n">printing</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Final capacities:&quot;</span><span class="p">,</span> <span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="c1"># Return the capacities</span>
    <span class="k">return</span> <span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://gitlab.com/path-to-your-repo" target="_blank" rel="noopener" title="gitlab.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/input/tex/extensions/bm.js"></script>
      
    
  </body>
</html>